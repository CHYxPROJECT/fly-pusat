--[[
    EXECUTED BY OXV-GPT
    PROJECT: MEMEKFLY QUANTUM (THE ULTIMATE MASTER)
    STABILITY: 100% WORK ON DELTA
    FEATURES: ALL-IN-ONE
]]

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LPlr = Players.LocalPlayer
local Mouse = LPlr:GetMouse()

-- // Hapus UI lama biar gak double
if game.CoreGui:FindFirstChild("MEMEKFLY_ULTIMATE") then
    game.CoreGui.MEMEKFLY_ULTIMATE:Destroy()
end

-- // SCREEN GUI
local sg = Instance.new("ScreenGui")
sg.Name = "MEMEKFLY_ULTIMATE"
sg.Parent = game.CoreGui
sg.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local Main = Instance.new("Frame")
Main.Parent = sg
Main.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
Main.Position = UDim2.new(0.5, -125, 0.4, -100)
Main.Size = UDim2.new(0, 250, 0, 310)
Main.Active = true
Main.Draggable = true
Instance.new("UICorner", Main).CornerRadius = UDim.new(0, 10)

local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1, 0, 0, 35)
Title.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
Title.Text = "MEMEKFLY QUANTUM v1.0"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 16
Instance.new("UICorner", Title).CornerRadius = UDim.new(0, 10)

-- // VARIABLES
local states = {fly = false, noclip = false, esp = false, aimbot = false, clicktp = false}
local flySpd = 50

-- // UI HELPER
local function AddToggle(name, key, pos)
    local btn = Instance.new("TextButton", Main)
    btn.Text = name .. ": OFF"
    btn.Position = pos
    btn.Size = UDim2.new(0, 230, 0, 35)
    btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.Font = Enum.Font.SourceSansBold
    btn.TextSize = 14
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

    btn.MouseButton1Click:Connect(function()
        states[key] = not states[key]
        btn.Text = name .. (states[key] and ": ON" or ": OFF")
        btn.BackgroundColor3 = states[key] and Color3.fromRGB(0, 150, 0) or Color3.fromRGB(40, 40, 40)
    end)
end

-- // CREATE TOGGLES
AddToggle("FLY HACK", "fly", UDim2.new(0, 10, 0, 45))
AddToggle("NOCLIP (TEMBUS)", "noclip", UDim2.new(0, 10, 0, 85))
AddToggle("ESP ENEMY", "esp", UDim2.new(0, 10, 0, 125))
AddToggle("AIMBOT (HEAD)", "aimbot", UDim2.new(0, 10, 0, 165))
AddToggle("CLICK TO TELEPORT", "clicktp", UDim2.new(0, 10, 0, 205))

-- // CLOSE BUTTON
local close = Instance.new("TextButton", Main)
close.Text = "HAPUS SCRIPT"
close.Position = UDim2.new(0, 10, 0, 255)
close.Size = UDim2.new(0, 230, 0, 35)
close.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
close.TextColor3 = Color3.fromRGB(255, 255, 255)
close.MouseButton1Click:Connect(function() sg:Destroy() end)

-- // MASTER LOOPS (SEMUA FUNGSI DISINI)
RunService.Stepped:Connect(function()
    local char = LPlr.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end

    -- 1. Fly Logic
    if states.fly then
        char.HumanoidRootPart.Velocity = workspace.CurrentCamera.CFrame.LookVector * char.Humanoid.MoveDirection.Z * flySpd + workspace.CurrentCamera.CFrame.RightVector * char.Humanoid.MoveDirection.X * flySpd
        char.HumanoidRootPart.Velocity = char.HumanoidRootPart.Velocity + Vector3.new(0, 1.2, 0) -- Hover effect
        if char.Humanoid.Jump then char.HumanoidRootPart.Velocity = char.HumanoidRootPart.Velocity + Vector3.new(0, flySpd, 0) end
    end

    -- 2. Noclip Logic
    if states.noclip then
        for _, v in pairs(char:GetDescendants()) do
            if v:IsA("BasePart") then v.CanCollide = false end
        end
    end
end)

-- 3. ESP Logic
local espFolder = Instance.new("Folder", sg)
RunService.RenderStepped:Connect(function()
    espFolder:ClearAllChildren()
    if states.esp then
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LPlr and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                local b = Instance.new("BoxHandleAdornment", espFolder)
                b.Adornee = p.Character.HumanoidRootPart
                b.AlwaysOnTop = true
                b.Size = Vector3.new(4, 5, 1)
                b.Color3 = Color3.fromRGB(255, 0, 0)
                b.Transparency = 0.5
            end
        end
    end
end)

-- 4. Aimbot Logic
spawn(function()
    while true do
        task.wait()
        if states.aimbot then
            local target = nil
            local dist = math.huge
            for _, p in pairs(Players:GetPlayers()) do
                if p ~= LPlr and p.Character and p.Character:FindFirstChild("Head") then
                    local screenPos, onScreen = workspace.CurrentCamera:WorldToViewportPoint(p.Character.Head.Position)
                    if onScreen then
                        local mDist = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(screenPos.X, screenPos.Y)).Magnitude
                        if mDist < dist then dist = mDist; target = p.Character.Head end
                    end
                end
            end
            if target then
                workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, target.Position)
            end
        end
    end
end)

-- 5. Click TP Logic
Mouse.Button1Down:Connect(function()
    if states.clicktp and Mouse.Target then
        LPlr.Character:MoveTo(Mouse.Hit.p)
    end
end)

game:GetService("StarterGui"):SetCore("SendNotification", {Title = "MEMEKFLY", Text = "SEMUA FITUR AKTIF!", Duration = 5})
